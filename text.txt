.then(result => {
                     
                                if(result){
                                    
                                   res.status(200).json({
                                       message : "Please add reapeted cart!"
                                   })
                                    
                                }else{


                                    const newCart = new AddCart({
                                        coffeeName : data.coffeeName,
                                        price : data.price,
                                        oldPrice : data.oldPrice,
                                        avatar : data.avatar,
                                        createdAt : data.createdAt,
                                        author : author,
                                        productId : data._id,
                                         })

                                         newCart.save()
                                        .then(cart => {
                                               
                                               const updateduser = {...req.user._doc};
                                                 console.log(req.user._doc)
                                               updateduser.cartCount = updateduser.cartCount + 1;

                                               updateduser.cartTotallPrice = updateduser.cartTotallPrice + data.price;
                                                    
                                               updateduser.CartList.push(cart._id)

                                                User.findByIdAndUpdate(updateduser._id, {$set : updateduser}, {new : true})
                                                    .then(user => {
                                                        
                                                            const cartData = {
                                                                cartCount : user.cartCount,
                                                                cartTotallPrice : user.cartTotallPrice
                                                            }
                                                            res.status(200).json({
                                                                cartPrices : cartData,
                                                                user,
                                                            })
                                                            
                                                        })
                                                    .catch(error => {
                                                            console.log(`errrrrrrr ${error.message}`)
                                                            res.status(500).json({
                                                                message : "There was an server error!"
                                                            })
                                                     })

                                                    
                                            })
                                         .catch(error => {
                                             console.log(error.message)
                                                    res.status(500).json({
                                                        message : "There was an server error!"
                                                    })
                                            })

                                    
    
                                    
                                }
                               })
                               .catch(err => {
                                 console.log(err.message)
                                   res.status(500).json({
                                       message : "There was an server error"
                                   })
                               })